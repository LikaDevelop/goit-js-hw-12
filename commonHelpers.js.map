{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport async function fetchHits(searchWorlds, page) {\n    const response = await axios.get(\"https://pixabay.com/api\", {\n        params: {\n            key: \"42798522-d824d0eb072596e07151c9725\",\n            q: searchWorlds,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page,\n        }\n    });\n    return await response.data;\n};\n\n\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderingImgs(gallery, hits) {\n\n    let list = [];\n    hits.forEach(function (i) {\n        const galleryItem = document.createElement(\"li\");\n        galleryItem.classList.add(\"gallery-item\");\n        const galleryLink = document.createElement(\"a\");\n        galleryLink.classList.add(\"gallery-link\");\n        galleryLink.setAttribute(\"href\", i.largeImageURL);\n        const galleryImage = document.createElement(\"img\");\n        galleryImage.classList.add(\"gallery-image\");\n        galleryImage.src = i.webformatURL;\n        galleryImage.alt = i.tags;\n        galleryLink.append(galleryImage);\n        galleryItem.append(galleryLink);\n        const description = `<div class=\"description\">\n                                <div class=\"likes\">\n                                    <h4>Likes</h4>\n                                    <p>${i.likes}</p>\n                                </div>\n                                <div class=\"views\">\n                                    <h4>Views</h4>\n                                    <p>${i.views}</p>\n                                </div>\n                                <div class=\"comments\">\n                                    <h4>Comments</h4>\n                                    <p>${i.comments}</p>\n                                </div>\n                                <div class=\"dowloads\">\n                                    <h4>Downloads</h4>\n                                    <p>${i.downloads}</p>\n                                </div>\n                            </div >`;\n        galleryItem.innerHTML += description;\n        list.push(galleryItem);\n    });\n\n    gallery.append(...list);\n\n    let lightbox = new SimpleLightbox('ul.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    lightbox.refresh();\n    return gallery.children[0].getBoundingClientRect();\n}\n\n\n","import * as request from \"/js/pixabay-api.js\";\nimport * as render from \"/js/render-functions.js\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst formSearch = document.querySelector(\".search-form\");\nconst inputSearch = document.querySelector(\".search-input\");\nconst btnMore = document.querySelector(\".btn-more\");\nconst loading = document.createElement(\"span\");\nloading.textContent = \"Loading images, please wait...\"\nformSearch.append(loading);\n\nloading.hidden = true;\nbtnMore.hidden = true;\nlet searchItem;\nlet hitsState;\nlet totalHits;\nlet page = 1;\nlet imgHeight;\n\nformSearch.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    page = 1\n    searchItem = inputSearch.value.trim();\n\n    if (searchItem == \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: \"Search field can't be empty\"\n        });\n    }\n    else {\n        await createGallery(searchItem);\n    }\n    inputSearch.value = '';\n});\n\nbtnMore.addEventListener(\"click\", async (event) => {\n    const totalPages = Math.ceil(totalHits / 15);\n    if (page > totalPages) {\n        btnMore.hidden = true;\n        return iziToast.error({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\"\n        });\n    }\n    else {\n        await createGallery(searchItem);\n        window.scrollBy({\n            top: imgHeight.height * 2,\n            left: 0,\n            behavior: \"smooth\",\n        });\n    }\n});\n\n\nasync function createGallery(searchItem) {\n    const gallery = document.querySelector('.gallery');\n    if (page == 1) {\n        gallery.innerHTML = \"\";\n    }\n\n    loading.hidden = false;\n    btnMore.hidden = true;\n\n    const data = await request.fetchHits(searchItem, page);\n    hitsState = data.hits;\n    totalHits = data.totalHits;\n    if (hitsState.length < 15) {\n        btnMore.hidden = true;\n    }\n    else {\n        btnMore.hidden = false;\n    }\n    loading.hidden = true;\n    if (hitsState.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: \"Sorry, there are no images matching your search query. Please try again!\"\n        });\n    }\n\n    else {\n        imgHeight = render.renderingImgs(gallery, hitsState);\n        if (page > 1) {\n            btnMore.hidden = false;\n        }\n        page += 1;\n    }\n}\n\n\n"],"names":["fetchHits","searchWorlds","page","axios","renderingImgs","gallery","hits","list","i","galleryItem","galleryLink","galleryImage","description","SimpleLightbox","formSearch","inputSearch","btnMore","loading","searchItem","hitsState","totalHits","imgHeight","event","iziToast","createGallery","totalPages","data","request.fetchHits","render.renderingImgs"],"mappings":"owBAOO,eAAeA,EAAUC,EAAcC,EAAM,CAYhD,OAAO,MAXU,MAAMC,EAAM,IAAI,0BAA2B,CACxD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACT,CAAK,GACqB,IAC1B,CCfO,SAASE,EAAcC,EAASC,EAAM,CAEzC,IAAIC,EAAO,CAAA,EACX,OAAAD,EAAK,QAAQ,SAAUE,EAAG,CACtB,MAAMC,EAAc,SAAS,cAAc,IAAI,EAC/CA,EAAY,UAAU,IAAI,cAAc,EACxC,MAAMC,EAAc,SAAS,cAAc,GAAG,EAC9CA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,aAAa,OAAQF,EAAE,aAAa,EAChD,MAAMG,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAU,IAAI,eAAe,EAC1CA,EAAa,IAAMH,EAAE,aACrBG,EAAa,IAAMH,EAAE,KACrBE,EAAY,OAAOC,CAAY,EAC/BF,EAAY,OAAOC,CAAW,EAC9B,MAAME,EAAc;AAAA;AAAA;AAAA,yCAGaJ,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA,yCAIPA,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA,yCAIPA,EAAE,QAAQ;AAAA;AAAA;AAAA;AAAA,yCAIVA,EAAE,SAAS;AAAA;AAAA,qCAG5CC,EAAY,WAAaG,EACzBL,EAAK,KAAKE,CAAW,CAC7B,CAAK,EAEDJ,EAAQ,OAAO,GAAGE,CAAI,EAEP,IAAIM,EAAe,eAAgB,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EACnF,QAAO,EACTR,EAAQ,SAAS,CAAC,EAAE,sBAAqB,CACpD,CCvCA,MAAMS,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAU,SAAS,cAAc,MAAM,EAC7CA,EAAQ,YAAc,iCACtBH,EAAW,OAAOG,CAAO,EAEzBA,EAAQ,OAAS,GACjBD,EAAQ,OAAS,GACjB,IAAIE,EACAC,EACAC,EACAlB,EAAO,EACPmB,EAEJP,EAAW,iBAAiB,SAAU,MAAOQ,GAAU,CACnDA,EAAM,eAAc,EACpBpB,EAAO,EACPgB,EAAaH,EAAY,MAAM,OAE3BG,GAAc,GACdK,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACrB,CAAS,EAGD,MAAMC,EAAcN,CAAU,EAElCH,EAAY,MAAQ,EACxB,CAAC,EAEDC,EAAQ,iBAAiB,QAAS,MAAOM,GAAU,CAC/C,MAAMG,EAAa,KAAK,KAAKL,EAAY,EAAE,EAC3C,GAAIlB,EAAOuB,EACP,OAAAT,EAAQ,OAAS,GACVO,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,4DACrB,CAAS,EAGD,MAAMC,EAAcN,CAAU,EAC9B,OAAO,SAAS,CACZ,IAAKG,EAAU,OAAS,EACxB,KAAM,EACN,SAAU,QACtB,CAAS,CAET,CAAC,EAGD,eAAeG,EAAcN,EAAY,CACrC,MAAMb,EAAU,SAAS,cAAc,UAAU,EAC7CH,GAAQ,IACRG,EAAQ,UAAY,IAGxBY,EAAQ,OAAS,GACjBD,EAAQ,OAAS,GAEjB,MAAMU,EAAO,MAAMC,EAAkBT,EAAYhB,CAAI,EACrDiB,EAAYO,EAAK,KACjBN,EAAYM,EAAK,UACbP,EAAU,OAAS,GACnBH,EAAQ,OAAS,GAGjBA,EAAQ,OAAS,GAErBC,EAAQ,OAAS,GACbE,EAAU,SAAW,EACrBI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACrB,CAAS,GAIDF,EAAYO,EAAqBvB,EAASc,CAAS,EAC/CjB,EAAO,IACPc,EAAQ,OAAS,IAErBd,GAAQ,EAEhB"}