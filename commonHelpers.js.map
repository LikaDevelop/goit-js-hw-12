{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport async function fetchHits(searchWorlds, page) {\n    const response = await axios.get(\"https://pixabay.com/api\", {\n        params: {\n            key: \"42798522-d824d0eb072596e07151c9725\",\n            q: searchWorlds,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page,\n        }\n    });\n    return await response.data;\n};\n\n\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderingImgs(gallery, hits) {\n\n    let list = [];\n    hits.forEach(function (i) {\n        const galleryItem = document.createElement(\"li\");\n        galleryItem.classList.add(\"gallery-item\");\n        const galleryLink = document.createElement(\"a\");\n        galleryLink.classList.add(\"gallery-link\");\n        galleryLink.setAttribute(\"href\", i.largeImageURL);\n        const galleryImage = document.createElement(\"img\");\n        galleryImage.classList.add(\"gallery-image\");\n        galleryImage.src = i.webformatURL;\n        galleryImage.alt = i.tags;\n        galleryLink.append(galleryImage);\n        galleryItem.append(galleryLink);\n        // add discription for img\n        const divForDescription = document.createElement(\"div\");\n        divForDescription.classList.add(\"description\");\n        // likes\n        const divForLikes = document.createElement(\"div\");\n        divForLikes.classList.add(\"likes\")\n        const likesTitle = document.createElement(\"h4\");\n        likesTitle.textContent = \"Likes\";\n        const likes = document.createElement(\"p\");\n        likes.textContent = i.likes;\n        divForLikes.append(likesTitle);\n        divForLikes.append(likes);\n        divForDescription.append(divForLikes);\n        // views\n        const divForViews = document.createElement(\"div\");\n        divForViews.classList.add(\"views\")\n        const viewsTitle = document.createElement(\"h4\");\n        viewsTitle.textContent = \"Views\";\n        const view = document.createElement(\"p\");\n        view.textContent = i.views;\n        divForViews.append(viewsTitle);\n        divForViews.append(view);\n        divForDescription.append(divForViews);\n        //comments\n        const divForComments = document.createElement(\"div\");\n        divForComments.classList.add(\"comments\")\n        const commentsTitle = document.createElement(\"h4\");\n        commentsTitle.textContent = \"Comments\";\n        const comment = document.createElement(\"p\");\n        comment.textContent = i.comments;\n        divForComments.append(commentsTitle);\n        divForComments.append(comment);\n        divForDescription.append(divForComments);\n        // downloads\n        const divForDownloads = document.createElement(\"div\");\n        divForDownloads.classList.add(\"dowloads\")\n        const downloadsTitle = document.createElement(\"h4\");\n        downloadsTitle.textContent = \"Downloads\";\n        const download = document.createElement(\"p\");\n        download.textContent = i.downloads;\n        divForDownloads.append(downloadsTitle);\n        divForDownloads.append(download);\n        divForDescription.append(divForDownloads);\n\n        galleryItem.append(divForDescription);\n        list.push(galleryItem);\n    });\n\n    gallery.append(...list);\n\n    let lightbox = new SimpleLightbox('ul.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    return gallery.children[0].getBoundingClientRect();\n}\n\n\n","import * as request from \"/js/pixabay-api.js\";\nimport * as render from \"/js/render-functions.js\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst formSearh = document.querySelector(\".search-form\");\nconst inputSearch = document.querySelector(\".search-input\");\nconst btnMore = document.querySelector(\".btn-more\");\nbtnMore.hidden = true;\nlet searchItem;\nlet hitsState;\nlet totalHits;\nlet page = 1;\nlet imgHeight;\n\nformSearh.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    page = 1\n    searchItem = inputSearch.value;\n\n    if (searchItem == \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: \"Search field can't be empty\"\n        });\n    }\n    else {\n        await createGallery(searchItem);\n    }\n    inputSearch.value = '';\n});\n\nbtnMore.addEventListener(\"click\", async (event) => {\n    console.log(totalHits)\n    const totalPages = Math.ceil(totalHits / 15);\n    if (page > totalPages) {\n        btnMore.hidden = true;\n        return iziToast.error({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\"\n        });\n    }\n    else {\n        await createGallery(searchItem);\n        window.scrollBy({\n            top: imgHeight.height * 2,\n            left: 0,\n            behavior: \"smooth\",\n        });\n    }\n});\n\n\nasync function createGallery(searchItem) {\n    const gallery = document.querySelector('.gallery');\n    if (page == 1) {\n        gallery.innerHTML = \"\";\n    }\n\n    const loading = document.createElement(\"p\");\n    loading.classList.add(\"loading\");\n    loading.textContent = \"Loading images, please wait...\"\n    formSearh.append(loading);\n\n    const data = await request.fetchHits(searchItem, page);\n    hitsState = data.hits;\n    totalHits = data.totalHits;\n    loading.remove();\n    if (hitsState.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: \"Sorry, there are no images matching your search query. Please try again!\"\n        });\n    }\n    else {\n        imgHeight = render.renderingImgs(gallery, hitsState);\n\n        page += 1;\n        if (page > 1) {\n            btnMore.hidden = false;\n        }\n    }\n}\n\n\n"],"names":["fetchHits","searchWorlds","page","axios","renderingImgs","gallery","hits","list","i","galleryItem","galleryLink","galleryImage","divForDescription","divForLikes","likesTitle","likes","divForViews","viewsTitle","view","divForComments","commentsTitle","comment","divForDownloads","downloadsTitle","download","SimpleLightbox","formSearh","inputSearch","btnMore","searchItem","hitsState","totalHits","imgHeight","event","iziToast","createGallery","totalPages","loading","data","request.fetchHits","render.renderingImgs"],"mappings":"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"}